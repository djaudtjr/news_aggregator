# í”„ë¡œì íŠ¸ êµ¬ì¡°

## ğŸ“‚ í´ë” êµ¬ì¡°

```
news-aggregator/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ api/                     # API Routes
â”‚   â”‚   â”œâ”€â”€ analytics/           # ë¶„ì„ API
â”‚   â”‚   â”œâ”€â”€ auth/               # ì¸ì¦ API
â”‚   â”‚   â”œâ”€â”€ bookmarks/          # ë¶ë§ˆí¬ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ cron/               # Cron ì‘ì—…
â”‚   â”‚   â”œâ”€â”€ email/              # ì´ë©”ì¼ ê´€ë ¨
â”‚   â”‚   â”œâ”€â”€ mypage/             # ë§ˆì´í˜ì´ì§€ API
â”‚   â”‚   â”œâ”€â”€ news/               # ë‰´ìŠ¤ ë°ì´í„°
â”‚   â”‚   â”œâ”€â”€ search/             # ê²€ìƒ‰
â”‚   â”‚   â”œâ”€â”€ subscriptions/      # êµ¬ë… ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ summarize/          # AI ìš”ì•½
â”‚   â”‚   â””â”€â”€ trending/           # ì¸ê¸° ê²€ìƒ‰ì–´
â”‚   â”œâ”€â”€ mypage/                 # ë§ˆì´í˜ì´ì§€ UI
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ globals.css             # ì „ì—­ ìŠ¤íƒ€ì¼
â”‚   â”œâ”€â”€ layout.tsx              # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â””â”€â”€ page.tsx                # ë©”ì¸ í˜ì´ì§€
â”œâ”€â”€ components/                  # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ auth/                   # ì¸ì¦ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ui/                     # shadcn/ui ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ subscription/           # êµ¬ë… ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ ... (ê¸°ëŠ¥ë³„ ì»´í¬ë„ŒíŠ¸)
â”œâ”€â”€ hooks/                      # Custom React Hooks
â”‚   â”œâ”€â”€ useArticleSummary.ts    # ê¸°ì‚¬ ìš”ì•½ í›…
â”‚   â”œâ”€â”€ useAuth.ts              # ì¸ì¦ í›…
â”‚   â”œâ”€â”€ useLayoutMode.ts        # ë ˆì´ì•„ì›ƒ ëª¨ë“œ í›…
â”‚   â”œâ”€â”€ useNewsFilters.ts       # ë‰´ìŠ¤ í•„í„° í›…
â”‚   â””â”€â”€ ... (ê¸°íƒ€ ì»¤ìŠ¤í…€ í›…)
â”œâ”€â”€ lib/                        # ë¼ì´ë¸ŒëŸ¬ë¦¬ & ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ email/                  # ì´ë©”ì¼ ë°œì†¡ ë¡œì§ (Nodemailer)
â”‚   â”œâ”€â”€ news/                   # ë‰´ìŠ¤ ìˆ˜ì§‘/ì²˜ë¦¬ ë¡œì§
â”‚   â”œâ”€â”€ supabase/               # Supabase í´ë¼ì´ì–¸íŠ¸ (ë¸Œë¼ìš°ì €, ì„œë²„)
â”‚   â””â”€â”€ utils/                  # ê³µí†µ ìœ í‹¸ë¦¬í‹° ë° íƒ€ì… ê°€ë“œ
â”œâ”€â”€ supabase/                   # Supabase ê´€ë ¨ íŒŒì¼
â”‚   â””â”€â”€ schema.sql              # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
â”œâ”€â”€ types/                      # TypeScript íƒ€ì… ì •ì˜
â”‚   â””â”€â”€ article.ts              # ì£¼ìš” ë°ì´í„° íƒ€ì…
â”œâ”€â”€ .env.local                  # ë¡œì»¬ í™˜ê²½ë³€ìˆ˜
â”œâ”€â”€ middleware.ts               # Next.js ë¯¸ë“¤ì›¨ì–´
â”œâ”€â”€ next.config.mjs             # Next.js ì„¤ì •
â”œâ”€â”€ package.json
â”œâ”€â”€ tailwind.config.ts          # Tailwind CSS ì„¤ì •
â””â”€â”€ tsconfig.json               # TypeScript ì„¤ì •
```

## ğŸ“„ ì£¼ìš” íŒŒì¼ë³„ ì—­í• 

### Pages & Layout

- **`app/layout.tsx`**: ëª¨ë“  í˜ì´ì§€ë¥¼ ê°ì‹¸ëŠ” ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ. `ThemeProvider`, `QueryProvider`, `Toaster` ë“± ì „ì—­ ì»¨í…ìŠ¤íŠ¸ í”„ë¡œë°”ì´ë”ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
- **`app/page.tsx`**: ë©”ì¸ ë‰´ìŠ¤ ì• ê·¸ë¦¬ê²Œì´í„° í˜ì´ì§€. ëŒ€ë¶€ë¶„ì˜ í•µì‹¬ UI ì»´í¬ë„ŒíŠ¸ì™€ í›…ì„ ì‚¬ìš©í•˜ì—¬ ë‰´ìŠ¤ í”¼ë“œë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.
- **`app/mypage/page.tsx`**: ì‚¬ìš©ìì˜ êµ¬ë… ì„¤ì •, ë¶ë§ˆí¬, í†µê³„ ë“±ì„ ê´€ë¦¬í•˜ëŠ” ë§ˆì´í˜ì´ì§€ì…ë‹ˆë‹¤.

### API Routes (`app/api`)

- **`/news`**: RSS ë° Naver APIë¡œë¶€í„° ë‰´ìŠ¤ë¥¼ ìˆ˜ì§‘, í†µí•©, ë¶„ë¥˜í•˜ì—¬ ì œê³µí•©ë‹ˆë‹¤.
- **`/search`**: í‚¤ì›Œë“œ ê²€ìƒ‰ì„ ì²˜ë¦¬í•˜ë©°, í•„ìš”í•œ ê²½ìš° í•œì˜ ë²ˆì—­ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- **`/summarize`**: Cheerioë¡œ ê¸°ì‚¬ ë³¸ë¬¸ì„ í¬ë¡¤ë§í•˜ê³  OpenAI APIë¥¼ í†µí•´ ìš”ì•½ ë° í•µì‹¬ í¬ì¸íŠ¸ë¥¼ ìƒì„±í•œ í›„, ê²°ê³¼ë¥¼ Supabaseì— ìºì‹±í•©ë‹ˆë‹¤.
- **`/cron/send-daily-digest`**: Vercel Cronì— ì˜í•´ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´, êµ¬ë…ìë“¤ì—ê²Œ ì´ë©”ì¼ ë‹¤ì´ì œìŠ¤íŠ¸ë¥¼ ë°œì†¡í•˜ëŠ” ì‘ì—…ì„ íŠ¸ë¦¬ê±°í•©ë‹ˆë‹¤.
- **`/subscriptions/**`**: í‚¤ì›Œë“œ êµ¬ë… ë° ì´ë©”ì¼ ë°œì†¡ ì„¤ì •ì„ ê´€ë¦¬í•˜ëŠ” APIì…ë‹ˆë‹¤.
- **`/auth/callback`**: Supabaseë¥¼ ì´ìš©í•œ Google OAuth ì¸ì¦ í›„ ì½œë°±ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

### Components (`components`)

- **`news-feed.tsx`**: í•„í„°ë§ëœ ë‰´ìŠ¤ ëª©ë¡ì„ ë°›ì•„ `NewsCard`ë¥¼ ê·¸ë¦¬ë“œ, ë¦¬ìŠ¤íŠ¸, ì»´íŒ©íŠ¸ ë“± ë‹¤ì–‘í•œ ë ˆì´ì•„ì›ƒìœ¼ë¡œ ë Œë”ë§í•©ë‹ˆë‹¤.
- **`news-header.tsx`**: ê²€ìƒ‰ì°½, ë¡œê·¸ì¸ ë²„íŠ¼, í…Œë§ˆ í† ê¸€ ë“± ìƒë‹¨ í—¤ë” ì˜ì—­ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
- **`news-card.tsx`**: ê°œë³„ ë‰´ìŠ¤ ê¸°ì‚¬ë¥¼ í‘œì‹œí•˜ëŠ” ì¹´ë“œ ì»´í¬ë„ŒíŠ¸. AI ìš”ì•½ ìš”ì²­ ê¸°ëŠ¥ì„ í¬í•¨í•©ë‹ˆë‹¤.
- **`*-filter.tsx`**: `news-categories.tsx`, `region-filter.tsx`, `time-range-filter.tsx` ë“± ë‰´ìŠ¤ í•„í„°ë§ UIë¥¼ ì œê³µí•©ë‹ˆë‹¤.
- **`recent-articles-sidebar.tsx`**: ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ìµœê·¼ ë³¸ ê¸°ì‚¬ ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” ì ‘ì´ì‹ ì‚¬ì´ë“œë°”ì…ë‹ˆë‹¤.

### Hooks (`hooks`)

- **`useNewsFilters.ts`**: ì¹´í…Œê³ ë¦¬, ì§€ì—­, ê²€ìƒ‰ì–´, ì‹œê°„ ë“± ë‰´ìŠ¤ í•„í„° ìƒíƒœë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
- **`useAuth.ts`**: Supabaseì˜ ì¸ì¦ ìƒíƒœë¥¼ êµ¬ë…í•˜ê³  ì‚¬ìš©ì ì„¸ì…˜ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
- **`useArticleSummary.ts`**: AI ìš”ì•½ ìš”ì²­ ë¡œì§ì„ ìº¡ìŠí™”í•˜ì—¬ UI ì»´í¬ë„ŒíŠ¸ì™€ ë¶„ë¦¬í•©ë‹ˆë‹¤.
- **`useSubscribedKeywords.ts`**, **`useEmailSettings.ts`**: ë§ˆì´í˜ì´ì§€ì—ì„œ êµ¬ë… ê´€ë ¨ ìƒíƒœ ë° API í˜¸ì¶œì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

### Libraries & Utilities (`lib`)

- **`news/`**: `rss-fetcher.ts`, `naver-news-fetcher.ts`, `categorizer.ts` ë“± ë‰´ìŠ¤ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ê°€ê³µí•˜ëŠ” í•µì‹¬ ë¡œì§ì´ í¬í•¨ë©ë‹ˆë‹¤.
- **`supabase/`**: ë¸Œë¼ìš°ì €, ì„œë²„, ì„œë¹„ìŠ¤ ë¡¤ ë“± í™˜ê²½ì— ë§ëŠ” Supabase í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.
- **`email/gmail.ts`**: Nodemailerë¥¼ ì‚¬ìš©í•˜ì—¬ Gmail SMTPë¥¼ í†µí•´ ì´ë©”ì¼ì„ ë°œì†¡í•˜ëŠ” ë¡œì§ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
- **`utils/`**: ë‚ ì§œ í¬ë§·íŒ…, í•´ì‹œ ìƒì„±, ë¡œê³  ë§¤í•‘ ë“± í”„ë¡œì íŠ¸ ì „ë°˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” í—¬í¼ í•¨ìˆ˜ë“¤ì„ í¬í•¨í•©ë‹ˆë‹¤.

## ğŸ”„ ë°ì´í„° íë¦„

### 1. ë‰´ìŠ¤ ì¡°íšŒ ë° í•„í„°ë§
`User Interaction` â†’ `Filter Components` â†’ `useNewsFilters` (ìƒíƒœ ì—…ë°ì´íŠ¸) â†’ `app/page.tsx` â†’ `React Query (useQuery)` â†’ `GET /api/news` â†’ `NewsFeed` â†’ `NewsCard` ë Œë”ë§

### 2. AI ìš”ì•½ ìš”ì²­
`User Click` (ìš”ì•½ ë²„íŠ¼) â†’ `useArticleSummary` â†’ `React Query (useMutation)` â†’ `POST /api/summarize` â†’ `OpenAI API` & `Supabase` (ìºì‹±) â†’ UI ì—…ë°ì´íŠ¸

### 3. ì´ë©”ì¼ êµ¬ë… ë° ë°œì†¡
- **ì„¤ì •**: `User` â†’ `app/mypage/page.tsx` â†’ `useSubscribedKeywords` / `useEmailSettings` â†’ `POST /api/subscriptions/**`
- **ë°œì†¡**: `Vercel Cron` â†’ `GET /api/cron/send-daily-digest` â†’ `Supabase` (êµ¬ë…ì ì¡°íšŒ) â†’ `lib/email/gmail.ts` (ë°œì†¡) â†’ `email_delivery_logs` (ê¸°ë¡)

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (`supabase/schema.sql`)

- **`news_summaries`**: AI ìš”ì•½, í•µì‹¬ í¬ì¸íŠ¸, ì¹´í…Œê³ ë¦¬ ë“± ê¸°ì‚¬ ë©”íƒ€ë°ì´í„° ìºì‹±.
- **`user_profiles`**: ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´.
- **`email_subscription_settings`**: ì‚¬ìš©ìì˜ ì´ë©”ì¼ ìˆ˜ì‹  ìš”ì¼, ì‹œê°„ ë“± ì„¤ì •.
- **`subscribed_keywords`**: ì‚¬ìš©ìê°€ êµ¬ë…í•œ í‚¤ì›Œë“œ ëª©ë¡.
- **`bookmarks`**: ì‚¬ìš©ìê°€ ë¶ë§ˆí¬í•œ ê¸°ì‚¬.
- **`search_keyword_analytics`**: ì¸ê¸° ê²€ìƒ‰ì–´ ë¶„ì„ì„ ìœ„í•œ ê²€ìƒ‰ ë¡œê·¸.
- **`email_delivery_logs`**: ì´ë©”ì¼ ë°œì†¡ ì„±ê³µ/ì‹¤íŒ¨ ë¡œê·¸.

## ğŸ¨ ìŠ¤íƒ€ì¼ë§

- **`app/globals.css`**: Tailwind CSS ê¸°ë³¸ ì„¤ì • ë° ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œì— ì‚¬ìš©ë  CSS ë³€ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
- **`tailwind.config.ts`**: í…Œë§ˆ ìƒ‰ìƒ, í°íŠ¸, ì• ë‹ˆë©”ì´ì…˜ ë“± Tailwind CSS ì„¤ì •ì„ í™•ì¥í•©ë‹ˆë‹¤.
- **`components/ui`**: `shadcn/ui`ë¥¼ í†µí•´ ìƒì„±ëœ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°ë³¸ UI ì»´í¬ë„ŒíŠ¸ë“¤ì´ ìœ„ì¹˜í•©ë‹ˆë‹¤.